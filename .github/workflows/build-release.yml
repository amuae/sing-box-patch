name: Build sing-box Patched Core

on:
  workflow_dispatch:
    inputs:
      source_branch:
        description: 'sing-box æºç ä¸»çº¿'
        required: true
        default: '1.13'
        type: choice
        options:
          - '1.12'
          - '1.13'
      
      source_tag:
        description: 'sing-box æºç æ ‡ç­¾'
        required: true
        default: 'release'
        type: choice
        options:
          - 'alpha'
          - 'beta'
          - 'rc'
          - 'release'
      
      source_version:
        description: 'sing-box æºç ç‰ˆæœ¬å· (latest=æœ€æ–°ç‰ˆæœ¬)'
        required: true
        default: 'latest'
        type: string
      
      create_release:
        description: 'æ˜¯å¦å‘å¸ƒ Release'
        required: true
        default: false
        type: boolean

env:
  GO_VERSION: '1.23'  # æ ¹æ®å®é™…è°ƒç ”ï¼Œ1.12/1.13ç‰ˆæœ¬ä½¿ç”¨Go 1.23
  CGO_ENABLED: '1'
  BUILD_TAGS: 'with_dhcp,with_wireguard,with_shadowsocksr,with_utls,with_reality,with_clash_api,with_quic,with_grpc,with_v2ray_api,with_gvisor,with_tailscale'

jobs:
  get-version:
    name: è·å–ç‰ˆæœ¬ä¿¡æ¯ (${{ inputs.source_branch }}-${{ inputs.source_tag }}-${{ inputs.source_version }})
    runs-on: ubuntu-latest
    outputs:
      version_tag: ${{ steps.version.outputs.version_tag }}
      version_number: ${{ steps.version.outputs.version_number }}
      actual_tag: ${{ steps.version.outputs.actual_tag }}
    steps:
      - name: è®¾ç½®ç‰ˆæœ¬ä¿¡æ¯
        id: version
        run: |
          # æ™ºèƒ½ç‰ˆæœ¬æŸ¥è¯¢å’Œé™çº§é€»è¾‘
          echo "ğŸ” å¼€å§‹æ™ºèƒ½ç‰ˆæœ¬æŸ¥è¯¢..."
          
          BRANCH="${{ inputs.source_branch }}"
          TAG="${{ inputs.source_tag }}"
          VERSION="${{ inputs.source_version }}"
          
          # å®šä¹‰é™çº§é¡ºåºï¼Œé’ˆå¯¹ä¸åŒç‰ˆæœ¬ç³»åˆ—
          if [ "$BRANCH" = "1.13" ]; then
            # 1.13ç³»åˆ—ç›®å‰åªæœ‰alphaç‰ˆæœ¬
            FALLBACK_ORDER=("alpha")
          else
            # å…¶ä»–ç‰ˆæœ¬æ”¯æŒå®Œæ•´å‘å¸ƒå‘¨æœŸ
            FALLBACK_ORDER=("release" "rc" "beta" "alpha")
          fi
          
          # æŸ¥æ‰¾ç‰ˆæœ¬çš„å‡½æ•°
          find_version() {
            local branch=$1
            local tag=$2
            local version=$3
            
            echo "ğŸ” æŸ¥è¯¢ $branch $tag $version..."
            
            if [ "$version" = "latest" ]; then
              # æŸ¥è¯¢æœ€æ–°ç‰ˆæœ¬
              if [ "$tag" = "release" ]; then
                # Release ç‰ˆæœ¬: v1.12.8 (1.13ç³»åˆ—æš‚æ— releaseç‰ˆæœ¬)
                if [ "$branch" = "1.13" ]; then
                  echo "âš ï¸ 1.13ç³»åˆ—æš‚æ— releaseç‰ˆæœ¬ï¼Œè¯·ä½¿ç”¨alphaç‰ˆæœ¬"
                  return 1
                fi
                local query_pattern="^v${branch}\\.[0-9]+$"
                curl -s "https://api.github.com/repos/SagerNet/sing-box/releases" | \
                  jq -r ".[] | select(.prerelease == false and (.tag_name | test(\"$query_pattern\"))) | .tag_name" | \
                  sort -V | tail -1
              else
                # Pre-release ç‰ˆæœ¬: v1.13.0-alpha.15, v1.12.0-rc.4
                local query_pattern="^v${branch}\\.[0-9]+-${tag}\\.[0-9]+$"
                curl -s "https://api.github.com/repos/SagerNet/sing-box/releases" | \
                  jq -r ".[] | select(.prerelease == true and (.tag_name | test(\"$query_pattern\"))) | .tag_name" | \
                  sort -V | tail -1
              fi
            else
              # æ£€æŸ¥æŒ‡å®šç‰ˆæœ¬æ˜¯å¦å­˜åœ¨
              local target_tag
              if [ "$tag" = "release" ]; then
                if [ "$branch" = "1.13" ]; then
                  echo "âš ï¸ 1.13ç³»åˆ—æš‚æ— releaseç‰ˆæœ¬ï¼Œè¯·ä½¿ç”¨alphaç‰ˆæœ¬"
                  return 1
                fi
                target_tag="v${branch}.${version}"
              else
                target_tag="v${branch}.0-${tag}.${version}"
              fi
              
              # éªŒè¯ç‰ˆæœ¬æ˜¯å¦å­˜åœ¨
              local status_code=$(curl -s -o /dev/null -w "%{http_code}" "https://api.github.com/repos/SagerNet/sing-box/releases/tags/${target_tag}")
              if [ "$status_code" = "200" ]; then
                echo "$target_tag"
              else
                return 1
              fi
            fi
          }
          
          # å°è¯•æŸ¥æ‰¾ç‰ˆæœ¬ï¼Œå¦‚æœå¤±è´¥åˆ™æŒ‰é¡ºåºé™çº§
          FOUND_VERSION=""
          CURRENT_TAG="$TAG"
          
          # é¦–å…ˆå°è¯•åŸå§‹è¯·æ±‚
          echo "ğŸ¯ å°è¯•æŸ¥æ‰¾: $BRANCH $CURRENT_TAG $VERSION"
          FOUND_VERSION=$(find_version "$BRANCH" "$CURRENT_TAG" "$VERSION")
          EXIT_CODE=$?
          
          if [ $EXIT_CODE -eq 0 ] && [ -n "$FOUND_VERSION" ] && [ "$FOUND_VERSION" != "null" ]; then
            echo "âœ… æ‰¾åˆ°ç‰ˆæœ¬: $FOUND_VERSION"
          else
            echo "âš ï¸ æœªæ‰¾åˆ° $BRANCH $CURRENT_TAG $VERSIONï¼Œå¼€å§‹é™çº§æŸ¥è¯¢..."
            
            # æ‰¾åˆ°å½“å‰æ ‡ç­¾åœ¨é™çº§é¡ºåºä¸­çš„ä½ç½®
            START_INDEX=-1
            for i in "${!FALLBACK_ORDER[@]}"; do
              if [ "${FALLBACK_ORDER[$i]}" = "$CURRENT_TAG" ]; then
                START_INDEX=$i
                break
              fi
            done
            
            # å¦‚æœå½“å‰æ ‡ç­¾ä¸åœ¨é™çº§åˆ—è¡¨ä¸­ï¼Œä»ç¬¬ä¸€ä¸ªå¼€å§‹
            if [ $START_INDEX -eq -1 ]; then
              START_INDEX=0
            fi
            
            # æŒ‰é™çº§é¡ºåºæŸ¥æ‰¾æœ€æ–°ç‰ˆæœ¬
            for ((i=START_INDEX; i<${#FALLBACK_ORDER[@]}; i++)); do
              FALLBACK_TAG="${FALLBACK_ORDER[$i]}"
              echo "ğŸ”„ å°è¯•é™çº§åˆ° $FALLBACK_TAG..."
              
              FOUND_VERSION=$(find_version "$BRANCH" "$FALLBACK_TAG" "latest")
              EXIT_CODE=$?
              
              if [ $EXIT_CODE -eq 0 ] && [ -n "$FOUND_VERSION" ] && [ "$FOUND_VERSION" != "null" ]; then
                echo "âœ… é™çº§æˆåŠŸ: $FOUND_VERSION"
                CURRENT_TAG="$FALLBACK_TAG"
                break
              fi
            done
          fi
          
          if [ -z "$FOUND_VERSION" ] || [ "$FOUND_VERSION" = "null" ]; then
            echo "âŒ æœªæ‰¾åˆ°ä»»ä½•å¯ç”¨ç‰ˆæœ¬"
            echo "è¯·æ£€æŸ¥è¾“å…¥çš„ç‰ˆæœ¬å‚æ•°ï¼š"
            echo "- åˆ†æ”¯: $BRANCH"
            echo "- æ ‡ç­¾: $TAG"  
            echo "- ç‰ˆæœ¬: $VERSION"
            exit 1
          fi
          
          # æå–çº¯ç‰ˆæœ¬å· (å»æ‰ v å‰ç¼€)
          VERSION_NUMBER="${FOUND_VERSION#v}"
          
          echo "version_tag=$FOUND_VERSION" >> $GITHUB_OUTPUT
          echo "version_number=$VERSION_NUMBER" >> $GITHUB_OUTPUT
          echo "actual_tag=$CURRENT_TAG" >> $GITHUB_OUTPUT
          
          echo "ğŸ¯ æœ€ç»ˆç‰ˆæœ¬: $FOUND_VERSION"
          echo "ğŸ“¦ ç‰ˆæœ¬å·: $VERSION_NUMBER"
          echo "ğŸ·ï¸ å®é™…æ ‡ç­¾: $CURRENT_TAG"
          
          # å¦‚æœå‘ç”Ÿäº†é™çº§ï¼Œè¾“å‡ºè­¦å‘Šä¿¡æ¯
          if [ "$CURRENT_TAG" != "$TAG" ]; then
            echo "âš ï¸ ç‰ˆæœ¬å·²é™çº§: $TAG -> $CURRENT_TAG"
          fi

  build:
    name: ç¼–è¯‘ ${{ needs.get-version.outputs.version_tag }} (${{ matrix.goos }}-${{ matrix.goarch }})
    runs-on: ubuntu-latest
    needs: get-version
    strategy:
      fail-fast: false
      matrix:
        include:
          - goos: android
            goarch: arm64
            suffix: ''
          - goos: linux
            goarch: amd64
            suffix: ''
          - goos: linux
            goarch: arm64
            suffix: ''
          - goos: windows
            goarch: amd64
            suffix: '.exe'
    
    steps:
      - name: æ£€å‡ºä»£ç 
        uses: actions/checkout@v4
      
      - name: è®¾ç½® Go ${{ env.GO_VERSION }}
        uses: actions/setup-go@v5
        with:
          go-version: ${{ env.GO_VERSION }}
      
      - name: è®¾ç½® Android NDK (ä»… Android)
        if: matrix.goos == 'android'
        uses: nttld/setup-ndk@v1
        with:
          ndk-version: r26c
          add-to-path: false
        
      - name: æ£€æŸ¥ Go ç‰ˆæœ¬
        run: |
          go version
          echo "âœ… Go ${{ env.GO_VERSION }} å·²å®‰è£…"
      
      - name: ä¸‹è½½ sing-box æºç 
        run: |
          echo "ğŸ”„ ä¸‹è½½ sing-box ${{ needs.get-version.outputs.version_tag }} æºç ..."
          git clone --depth 1 --branch ${{ needs.get-version.outputs.version_tag }} \
            https://github.com/SagerNet/sing-box.git sing-box-source
          echo "âœ… æºç ä¸‹è½½å®Œæˆ"
      
      - name: åº”ç”¨è¡¥ä¸
        run: |
          echo "ğŸ”§ åº”ç”¨ ${{ inputs.source_branch }} ç‰ˆæœ¬è¡¥ä¸..."
          # æ£€æŸ¥è¡¥ä¸ç›®å½•æ˜¯å¦å­˜åœ¨
          if [ ! -d "source/${{ inputs.source_branch }}" ]; then
            echo "âŒ è¡¥ä¸ç›®å½• source/${{ inputs.source_branch }} ä¸å­˜åœ¨"
            exit 1
          fi
          
          # å¤åˆ¶è¡¥ä¸æºç 
          cp -r source/${{ inputs.source_branch }}/* sing-box-source/
          echo "âœ… è¡¥ä¸åº”ç”¨å®Œæˆ"
      
      - name: è®¾ç½®ç¼–è¯‘ç¯å¢ƒå˜é‡
        run: |
          echo "GOOS=${{ matrix.goos }}" >> $GITHUB_ENV
          echo "GOARCH=${{ matrix.goarch }}" >> $GITHUB_ENV
          
          # Android ç‰¹æ®Šè®¾ç½®
          if [ "${{ matrix.goos }}" = "android" ]; then
            echo "CC=${{ env.ANDROID_NDK_ROOT }}/toolchains/llvm/prebuilt/linux-x86_64/bin/aarch64-linux-android33-clang" >> $GITHUB_ENV
            echo "CXX=${{ env.ANDROID_NDK_ROOT }}/toolchains/llvm/prebuilt/linux-x86_64/bin/aarch64-linux-android33-clang++" >> $GITHUB_ENV
          fi
      
      - name: ç¼–è¯‘ sing-box
        working-directory: sing-box-source
        run: |
          echo "ğŸ—ï¸ å¼€å§‹ç¼–è¯‘ ${{ matrix.goos }}-${{ matrix.goarch }}..."
          
          # è·å–ç‰ˆæœ¬ä¿¡æ¯
          VERSION="${{ needs.get-version.outputs.version_number }}"
          COMMIT_HASH=$(git rev-parse --short HEAD)
          BUILD_TIME=$(date -u +"%Y-%m-%dT%H:%M:%SZ")
          
          # è®¾ç½® LDFLAGS
          LDFLAGS="-X 'github.com/sagernet/sing-box/constant.Version=$VERSION' \
                   -X 'github.com/sagernet/sing-box/constant.Commit=$COMMIT_HASH' \
                   -X 'github.com/sagernet/sing-box/constant.BuildTime=$BUILD_TIME' \
                   -s -w -buildid="
          
          # ä½¿ç”¨é¢„å®šä¹‰çš„å®Œæ•´ç¼–è¯‘æ ‡ç­¾
          BUILD_TAGS="${{ env.BUILD_TAGS }}"
          
          echo "ğŸ“‹ ç¼–è¯‘æ ‡ç­¾: $BUILD_TAGS"
          echo "ğŸ”§ LDFLAGS: $LDFLAGS"
          
          # ç¼–è¯‘
          go build -v -trimpath \
            -ldflags "$LDFLAGS" \
            -tags "$BUILD_TAGS" \
            -o "sing-box-${{ matrix.goos }}-${{ matrix.goarch }}${{ matrix.suffix }}" \
            ./cmd/sing-box
          
          echo "âœ… ç¼–è¯‘å®Œæˆ"
          ls -la sing-box-*
      
      - name: æµ‹è¯•ç¼–è¯‘äº§ç‰©
        working-directory: sing-box-source
        run: |
          # ä»…åœ¨ linux-amd64 ä¸Šæµ‹è¯• (native å¹³å°)
          if [ "${{ matrix.goos }}" = "linux" ] && [ "${{ matrix.goarch }}" = "amd64" ]; then
            echo "ğŸ§ª æµ‹è¯•ç¼–è¯‘äº§ç‰©..."
            ./sing-box-${{ matrix.goos }}-${{ matrix.goarch }} version
            echo "âœ… ç¼–è¯‘äº§ç‰©æµ‹è¯•é€šè¿‡"
          else
            echo "â­ï¸ è·³è¿‡éæœ¬åœ°å¹³å°æµ‹è¯•"
          fi
      
      - name: æ‰“åŒ…ç¼–è¯‘äº§ç‰©
        working-directory: sing-box-source
        run: |
          echo "ğŸ“¦ æ‰“åŒ…ç¼–è¯‘äº§ç‰©..."
          
          # åˆ›å»ºç›®å½•ç»“æ„
          PACKAGE_NAME="sing-box-${{ matrix.goos }}-${{ matrix.goarch }}-${{ needs.get-version.outputs.version_number }}"
          mkdir -p "$PACKAGE_NAME"
          
          # å¤åˆ¶äºŒè¿›åˆ¶æ–‡ä»¶
          cp "sing-box-${{ matrix.goos }}-${{ matrix.goarch }}${{ matrix.suffix }}" "$PACKAGE_NAME/"
          
          # å¤åˆ¶ç¤ºä¾‹é…ç½®æ–‡ä»¶
          if [ -d "../examples" ]; then
            cp -r ../examples "$PACKAGE_NAME/"
          fi
          
          # åˆ›å»º README
          cat > "$PACKAGE_NAME/README.md" << EOF
          # sing-box Patched Core
          
          **ç‰ˆæœ¬**: ${{ needs.get-version.outputs.version_number }}  
          **å¹³å°**: ${{ matrix.goos }}-${{ matrix.goarch }}  
          **ç¼–è¯‘æ—¶é—´**: $(date -u +"%Y-%m-%d %H:%M:%S UTC")  
          **è¡¥ä¸ç‰ˆæœ¬**: ${{ inputs.source_branch }}
          
          ## ä½¿ç”¨æ–¹æ³•
          
          \`\`\`bash
          # èµ‹äºˆæ‰§è¡Œæƒé™
          chmod +x sing-box-${{ matrix.goos }}-${{ matrix.goarch }}${{ matrix.suffix }}
          
          # æŸ¥çœ‹ç‰ˆæœ¬
          ./sing-box-${{ matrix.goos }}-${{ matrix.goarch }}${{ matrix.suffix }} version
          
          # è¿è¡Œ (éœ€è¦é…ç½®æ–‡ä»¶)
          ./sing-box-${{ matrix.goos }}-${{ matrix.goarch }}${{ matrix.suffix }} run -c config.json
          \`\`\`
          
          ## æ–°å¢åŠŸèƒ½
          
          - âœ… Provider è®¢é˜…æ”¯æŒ (Remote/Local/Inline)
          - âœ… ç»„åˆ«é€‰æ‹©å™¨å¢å¼º (providers å­—æ®µ)  
          - âœ… ClashAPI æ‰©å±• (/providers/proxies)
          - âœ… èŠ‚ç‚¹è¿‡æ»¤ (include/exclude)
          EOF
          
          # æ‰“åŒ…
          tar -czf "$PACKAGE_NAME.tar.gz" "$PACKAGE_NAME"
          echo "âœ… æ‰“åŒ…å®Œæˆ: $PACKAGE_NAME.tar.gz"
          
          # è¾“å‡ºæ–‡ä»¶ä¿¡æ¯
          ls -la "$PACKAGE_NAME.tar.gz"
      
      - name: ä¸Šä¼ æ„å»ºäº§ç‰©
        uses: actions/upload-artifact@v4
        with:
          name: sing-box-${{ matrix.goos }}-${{ matrix.goarch }}-${{ needs.get-version.outputs.version_number }}
          path: sing-box-source/sing-box-${{ matrix.goos }}-${{ matrix.goarch }}-${{ needs.get-version.outputs.version_number }}.tar.gz
          retention-days: 7

  release:
    name: å‘å¸ƒ Release
    runs-on: ubuntu-latest
    needs: [get-version, build]
    if: inputs.create_release == true
    steps:
      - name: ä¸‹è½½æ‰€æœ‰æ„å»ºäº§ç‰©
        uses: actions/download-artifact@v4
        with:
          path: artifacts
      
      - name: å‡†å¤‡ Release æ–‡ä»¶
        run: |
          echo "ğŸ“¦ å‡†å¤‡ Release æ–‡ä»¶..."
          mkdir -p release-files
          
          # ç§»åŠ¨æ‰€æœ‰æ–‡ä»¶åˆ° release-files ç›®å½•
          find artifacts -name "*.tar.gz" -exec cp {} release-files/ \;
          
          # æ˜¾ç¤ºæ–‡ä»¶åˆ—è¡¨
          echo "ğŸ¯ Release æ–‡ä»¶åˆ—è¡¨:"
          ls -la release-files/
      
      - name: åˆ›å»º Release
        uses: softprops/action-gh-release@v2
        with:
          tag_name: sing-box-${{ needs.get-version.outputs.version_number }}
          name: sing-box-${{ needs.get-version.outputs.version_number }}
          body: |
            # sing-box Patched Core ${{ needs.get-version.outputs.version_number }}
            
            åŸºäº sing-box ${{ needs.get-version.outputs.version_tag }} çš„è¡¥ä¸ç‰ˆæœ¬ï¼Œæ–°å¢ Provider è®¢é˜…åŠŸèƒ½ã€‚
            
            ${{ needs.get-version.outputs.actual_tag != github.event.inputs.source_tag && format('âš ï¸ **ç‰ˆæœ¬é™çº§**: è¯·æ±‚çš„ {0} ç‰ˆæœ¬ä¸å­˜åœ¨ï¼Œå·²è‡ªåŠ¨é™çº§åˆ° {1} ç‰ˆæœ¬', github.event.inputs.source_tag, needs.get-version.outputs.actual_tag) || '' }}
            
            ## ğŸ¯ æ–°å¢åŠŸèƒ½
            
            - âœ… **Provider è®¢é˜…æ”¯æŒ**: Remoteã€Localã€Inline ä¸‰ç§æ¨¡å¼
            - âœ… **ç»„åˆ«é€‰æ‹©å™¨å¢å¼º**: æ”¯æŒ `providers` å­—æ®µ  
            - âœ… **ClashAPI æ‰©å±•**: æ–°å¢ `/providers/proxies`ã€`/providers/rules` ç«¯ç‚¹
            - âœ… **èŠ‚ç‚¹è¿‡æ»¤åŠŸèƒ½**: æ”¯æŒ `include`/`exclude` æ­£åˆ™è¿‡æ»¤
            - âœ… **æ‰‹åŠ¨æ›´æ–°æ”¯æŒ**: API æ‰‹åŠ¨è§¦å‘è®¢é˜…å’Œè§„åˆ™æ›´æ–°
            - âœ… **å¥åº·æ£€æŸ¥**: Provider èŠ‚ç‚¹å¥åº·çŠ¶æ€ç›‘æ§
            
            ## ğŸ“‹ æ”¯æŒå¹³å°
            
            | å¹³å° | æ¶æ„ | ä¸‹è½½ |
            |------|------|------|
            | Android | ARM64 | `sing-box-android-arm64-${{ needs.get-version.outputs.version_number }}.tar.gz` |
            | Linux | AMD64 | `sing-box-linux-amd64-${{ needs.get-version.outputs.version_number }}.tar.gz` |
            | Linux | ARM64 | `sing-box-linux-arm64-${{ needs.get-version.outputs.version_number }}.tar.gz` |
            | Windows | AMD64 | `sing-box-windows-amd64-${{ needs.get-version.outputs.version_number }}.tar.gz` |
            
            ## ğŸ”§ æŠ€æœ¯è§„æ ¼
            
            - **åŸºäºç‰ˆæœ¬**: sing-box ${{ needs.get-version.outputs.version_tag }}
            - **è¡¥ä¸ç‰ˆæœ¬**: ${{ github.event.inputs.source_branch }}
            - **ç¼–è¯‘å·¥å…·**: Go ${{ env.GO_VERSION }}
            - **ç¼–è¯‘æ ‡ç­¾**: `${{ env.BUILD_TAGS }}`
            - **CGO**: å·²å¯ç”¨
            - **å®é™…æ ‡ç­¾**: ${{ needs.get-version.outputs.actual_tag }}
            
            ## ğŸš€ å¿«é€Ÿå¼€å§‹
            
            1. ä¸‹è½½å¯¹åº”å¹³å°çš„å‹ç¼©åŒ…
            2. è§£å‹å¹¶èµ‹äºˆæ‰§è¡Œæƒé™
            3. å‚è€ƒ `examples/` ç›®å½•ä¸‹çš„é…ç½®ç¤ºä¾‹
            4. ä½¿ç”¨ `./sing-box run -c config.json` å¯åŠ¨
            
            ## ğŸ“– é…ç½®ç¤ºä¾‹
            
            è¯·å‚è€ƒå‹ç¼©åŒ…å†…çš„ `examples/` ç›®å½•ï¼ŒåŒ…å«ï¼š
            - `remote-provider.json` - è¿œç¨‹è®¢é˜…é…ç½®
            - `local-provider.json` - æœ¬åœ°èŠ‚ç‚¹é…ç½®  
            - `inline-provider.json` - å†…è”èŠ‚ç‚¹é…ç½®
            
            ## âš ï¸ æ³¨æ„äº‹é¡¹
            
            - æœ¬ç‰ˆæœ¬ä¸ºéå®˜æ–¹è¡¥ä¸ç‰ˆæœ¬ï¼Œä½¿ç”¨å‰è¯·ä»”ç»†æµ‹è¯•
            - Provider åŠŸèƒ½éœ€è¦é…åˆæ”¯æŒçš„å®¢æˆ·ç«¯ä½¿ç”¨
            - å»ºè®®åœ¨æµ‹è¯•ç¯å¢ƒéªŒè¯é…ç½®åå†éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
            
          files: release-files/*.tar.gz
          draft: false
          prerelease: false
          generate_release_notes: false